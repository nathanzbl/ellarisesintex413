<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title data-i18n-key="doc_title_donate">Ella Rises - Support Our Youth</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:wght@400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --er-blue:     #99B7C6;
            --er-lavender: #978EC4;
            --er-cream:    #F9F5EA;
            --er-blush:    #FFD8D1;
            --er-pink:     #F9AFB1;
            --er-sage:     #9AB59D;
            --er-charcoal: #3A3F3B;
            --er-peach:    #F4B092;
            --er-rose:     #CE325B;
        }

        * {
            box-sizing: border-box;
        }

        html {
            font-family: 'Montserrat', sans-serif;
            font-weight: 400;
        }

        body {
            margin: 0;
            background: var(--er-cream);
            color: var(--er-charcoal);
        }

        h1, h2 {
            font-family: 'DM Serif Display', serif;
            font-weight: 400;
        }

        h3 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
        }

        a {
            color: var(--er-rose);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        main {
            max-width: 1100px;
            margin: 2.5rem auto;
            padding: 0 1.5rem 3rem;
        }

        .page-layout {
            display: grid;
            grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
            gap: 2.5rem;
            align-items: flex-start;
        }

        /* LEFT - Story and impact */
        .story-card {
            background-color: white;
            border-radius: 1.25rem;
            padding: 2rem;
            box-shadow: 0 18px 40px rgba(58, 63, 59, 0.08);
            border: 1px solid var(--er-blush);
        }

        .tagline {
            font-size: 0.8rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: var(--er-rose);
            font-weight: 600;
            font-family: 'Montserrat', sans-serif;
        }

        .story-card h1 {
            margin-top: 0.5rem;
            font-size: 2rem;
            line-height: 1.2;
            color: var(--er-charcoal);
        }

        .lead {
            margin-top: 0.75rem;
            color: var(--er-charcoal);
            line-height: 1.6;
            font-family: 'Montserrat', sans-serif;
            font-weight: 400;
        }

        .progress {
            margin: 1.5rem 0;
        }

        .progress-top {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            margin-bottom: 0.35rem;
            color: var(--er-charcoal);
            font-family: 'Montserrat', sans-serif;
        }

        .progress-bar {
            position: relative;
            height: 10px;
            border-radius: 999px;
            background-color: var(--er-blush);
            overflow: hidden;
        }

        .progress-bar-inner {
            height: 100%;
            width: 0;
            background: linear-gradient(to right, var(--er-sage), var(--er-pink));
            transition: width 0.4s ease;
        }

        .impact-list {
            margin-top: 1.25rem;
            padding-left: 1rem;
            font-family: 'Montserrat', sans-serif;
        }

        .impact-list li {
            margin-bottom: 0.5rem;
            color: var(--er-charcoal);
        }

        .note {
            font-size: 0.8rem;
            color: var(--er-charcoal);
            margin-top: 1rem;
            font-family: 'Montserrat', sans-serif;
            font-weight: 300;
        }

        /* RIGHT - Donation form */
        .donation-card {
            background-color: white;
            border-radius: 1.25rem;
            padding: 2rem;
            box-shadow: 0 18px 40px rgba(58, 63, 59, 0.08);
            border: 1px solid var(--er-blush);
        }

        .donation-card h2 {
            margin-top: 0;
            color: var(--er-charcoal);
        }

        .subtext {
            font-size: 0.9rem;
            color: var(--er-charcoal);
            margin-bottom: 1rem;
            font-family: 'Montserrat', sans-serif;
        }

        form {
            display: grid;
            gap: 1.25rem;
        }

        .field-group {
            display: grid;
            gap: 0.75rem;
        }

        .field-group h3 {
            color: var(--er-charcoal);
            margin: 0 0 0.5rem 0;
        }

        label {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--er-charcoal);
            display: block;
            margin-bottom: 0.2rem;
            font-family: 'Montserrat', sans-serif;
        }

        input[type="text"],
        input[type="email"],
        input[type="number"],
        input[type="tel"],
        select,
        textarea {
            width: 100%;
            padding: 0.55rem 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid var(--er-sage);
            font-size: 0.9rem;
            font-family: 'Montserrat', sans-serif;
            background-color: white;
            color: var(--er-charcoal);
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="number"]:focus,
        input[type="tel"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--er-rose);
        }

        textarea {
            min-height: 70px;
            resize: vertical;
        }

        .inline-fields {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.75rem;
        }

        /* Amount buttons */
        .pill-toggle-group {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .pill-toggle {
            position: relative;
        }

        .pill-toggle input[type="radio"] {
            position: absolute;
            opacity: 0;
        }

        .pill-toggle span {
            display: inline-block;
            padding: 0.45rem 0.9rem;
            border-radius: 999px;
            border: 1px solid var(--er-sage);
            font-size: 0.9rem;
            cursor: pointer;
            background-color: var(--er-cream);
            color: var(--er-charcoal);
            font-family: 'Montserrat', sans-serif;
        }

        .pill-toggle input[type="radio"]:checked + span {
            background-color: var(--er-pink);
            border-color: var(--er-pink);
            color: white;
            font-weight: 600;
        }

        .pill-toggle span:hover {
            background-color: var(--er-blush);
        }

        .pill-toggle input[type="radio"]:checked + span:hover {
            background-color: var(--er-rose);
        }

        .help {
            font-size: 0.75rem;
            color: var(--er-charcoal);
            margin-top: 0.15rem;
            font-family: 'Montserrat', sans-serif;
            font-weight: 300;
        }

        .checkbox-row {
            display: flex;
            gap: 0.5rem;
            align-items: flex-start;
            font-size: 0.85rem;
            color: var(--er-charcoal);
            font-family: 'Montserrat', sans-serif;
        }

        .checkbox-row input[type="checkbox"] {
            accent-color: var(--er-rose);
        }

        .submit-row {
            margin-top: 0.5rem;
        }

        .submit-row button {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.9rem;
            border: none;
            background-color: var(--er-pink);
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
        }

        .submit-row button:hover {
            background-color: var(--er-rose);
        }

        .secure-text {
            text-align: center;
            font-size: 0.75rem;
            color: var(--er-charcoal);
            margin-top: 0.4rem;
            font-family: 'Montserrat', sans-serif;
            font-weight: 300;
        }

        .error-banner {
            margin-bottom: 1rem;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            background-color: #ffe6e6;
            border: 1px solid #ffb3b3;
            color: #a00000;
            font-size: 0.9rem;
        }

        @media (max-width: 900px) {
            .page-layout {
                grid-template-columns: minmax(0, 1fr);
            }
        }
    </style>
</head>
<body>
    <%- include('../common/navbar.ejs') %>

    <main>
        <%- include('../spanishtranslationstorage.ejs') %>

        <%
          // helpers
          function formatCurrency(num) {
            const n = Number(num);
            if (!isNaN(n)) {
              return n.toLocaleString("en-US", {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
              });
            }
            return "0.00";
          }

          function formatCurrencyNoCents(num) {
            const n = Number(num);
            if (!isNaN(n)) {
              return n.toLocaleString("en-US", {
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
              });
            }
            return "0";
          }

          const totalForDisplay   = Number(typeof totalRaised      !== "undefined" ? totalRaised      : 0) || 0;
          const goalForDisplay    = Number(typeof goalAmount      !== "undefined" ? goalAmount      : 0) || 0;
          const percentForDisplay = Number(typeof progressPercent !== "undefined" ? progressPercent : 0) || 0;

          const firstNameVal   = (typeof first_name   !== "undefined") ? first_name   : "";
          const lastNameVal    = (typeof last_name    !== "undefined") ? last_name    : "";
          const emailVal       = (typeof email        !== "undefined") ? email        : "";
          const phoneVal       = (typeof phone        !== "undefined") ? phone        : "";
          const amountChoice   = (typeof amount_choice !== "undefined") ? String(amount_choice) : "";
          const otherAmountVal = (typeof other_amount !== "undefined") ? other_amount : "";
          const anonChecked    = (typeof anonymous    !== "undefined" && anonymous);
        %>

        <div class="page-layout">

            <!-- LEFT CARD: Story and progress -->
            <section class="story-card">
                <div class="tagline" data-i18n-key="story_tagline">Rise With Ella</div>
                <h1 data-i18n-key="story_headline">Empowering Futures, One Donation at a Time</h1>
                <p class="lead" data-i18n-key="story_lead_text">
                    Ella Rises helps young Latinas in Utah envision themselves in college, in STEAM careers,
                    and as leaders in their communities. Your gift fuels mentoring, creative workshops, and
                    life-changing experiences.
                </p>

                <div class="progress">
                    <div class="progress-top">
  <span>
    <span data-i18n-key="progress_raised_prefix">Raised:</span>
    &nbsp;
    <strong>
      $<%= formatCurrency(totalForDisplay) %>
    </strong>
  </span>

  <span>
    <span data-i18n-key="progress_goal_prefix">Goal:</span>
    &nbsp;
    <strong>
      $<%= formatCurrencyNoCents(goalForDisplay) %>
    </strong>
  </span>
</div>
<div class="progress-bar">
                        <div
                            class="progress-bar-inner"
                            data-progress="<%= percentForDisplay %>">
                        </div>
                    </div>
                </div>

                <h3 data-i18n-key="impact_title">Why Your Donation Matters</h3>
                <ul class="impact-list">
                    <li data-i18n-key="impact_list_1">Funds youth summits and day camps focused on STEAM and identity.</li>
                    <li data-i18n-key="impact_list_2">Supports campus visits to local universities and colleges.</li>
                    <li data-i18n-key="impact_list_3">Expands arts and culture programs like mariachi and ballet folklorico.</li>
                </ul>

                <p class="note" data-i18n-key="story_note">
                    Every dollar helps a young woman see herself in higher education and feel proud of her
                    heritage. Thank you for investing in her story.
                </p>
            </section>

            <!-- RIGHT CARD: Donation form -->
            <section class="donation-card" aria-label="Donation form">
                <h2 data-i18n-key="form_title">Choose Your Gift</h2>
                <p class="subtext" data-i18n-key="form_subtext">
                    Complete the secure form below to make a tax-deductible donation to Ella Rises.
                </p>

                <% if (typeof error_message !== "undefined" && error_message) { %>
                    <div class="error-banner">
                        <%= error_message %>
                    </div>
                <% } %>

                <form action="/donations/add" method="post">
                    <div class="field-group">
                        <h3 data-i18n-key="h3_donor_info">Donor Information</h3>

                        <div class="inline-fields">
                            <div>
                                <label for="first_name" data-i18n-key="label_first_name">First Name</label>
                                <input
                                    type="text"
                                    id="first_name"
                                    name="first_name"
                                    value="<%= firstNameVal %>"
                                    required>
                            </div>
                            <div>
                                <label for="last_name" data-i18n-key="label_last_name">Last Name</label>
                                <input
                                    type="text"
                                    id="last_name"
                                    name="last_name"
                                    value="<%= lastNameVal %>"
                                    required>
                            </div>
                        </div>

                        <div class="inline-fields">
                            <div>
                                <label for="email" data-i18n-key="label_email">Email</label>
                                <input
                                    type="email"
                                    id="email"
                                    name="email"
                                    value="<%= emailVal %>"
                                    required>
                                <div class="help" data-i18n-key="help_receipt">For your receipt and updates.</div>
                            </div>
                            <div>
                                <label for="phone">Phone</label>
                                <input
                                    type="tel"
                                    id="phone"
                                    name="phone"
                                    placeholder="555-555-5555"
                                    pattern="\d{3}-\d{3}-\d{4}"
                                    title="Please enter a phone number in the format 555-555-5555"
                                    value="<%= phoneVal %>">
                            </div>
                        </div>

                        <div class="checkbox-row">
                            <input
                                type="checkbox"
                                id="anonymous"
                                name="anonymous"
                                value="1"
                                <%= anonChecked ? "checked" : "" %>>
                            <label for="anonymous" data-i18n-key="label_anonymous_checkbox">Make my donation anonymous.</label>
                        </div>
                    </div>

                    <div class="field-group">
                        <h3 data-i18n-key="h3_amount">Donation Amount</h3>

                        <div class="pill-toggle-group">
                            <label class="pill-toggle">
                                <input
                                    type="radio"
                                    name="amount_choice"
                                    value="25"
                                    <%= amountChoice === "25" ? "checked" : "" %>>
                                <span>$25</span>
                            </label>
                            <label class="pill-toggle">
                                <input
                                    type="radio"
                                    name="amount_choice"
                                    value="55"
                                    <%= amountChoice === "55" ? "checked" : "" %>>
                                <span>$55</span>
                            </label>
                            <label class="pill-toggle">
                                <input
                                    type="radio"
                                    name="amount_choice"
                                    value="100"
                                    <%= amountChoice === "100" ? "checked" : "" %>>
                                <span>$100</span>
                            </label>
                            <label class="pill-toggle">
                                <input
                                    type="radio"
                                    name="amount_choice"
                                    value="250"
                                    <%= amountChoice === "250" ? "checked" : "" %>>
                                <span>$250</span>
                            </label>
                            <label class="pill-toggle">
                                <input
                                    type="radio"
                                    name="amount_choice"
                                    value="1000"
                                    <%= amountChoice === "1000" ? "checked" : "" %>>
                                <span>$1,000</span>
                            </label>
                        </div>

                        <div style="margin-top: 0.75rem;">
                            <label for="other_amount">Other Amount (USD)</label>
                            <div style="display: flex; align-items: center;">
                                <span style="font-size: 1rem; margin-right: 0.5rem; color: var(--er-charcoal);">$</span>
                                <input
                                    type="number"
                                    id="other_amount"
                                    name="other_amount"
                                    min="1"
                                    max="10000000"
                                    step="0.01"
                                    inputmode="decimal"
                                    placeholder="Enter another amount"
                                    style="flex: 1;"
                                    value="<%= otherAmountVal %>">
                            </div>
                            <div class="help">
                                If you enter an "Other" amount, it will override the buttons above.
                            </div>
                        </div>
                    </div>

                    <div class="submit-row">
                        <button type="submit" data-i18n-key="btn_payment">Continue to Payment</button>
                        <div class="secure-text" data-i18n-key="secure_text">
                            This is a demo form for INTEX. In production, this would connect to a secure payment processor.
                        </div>
                    </div>
                </form>
            </section>
        </div>
    </main>

    <%- include('../common/footer.ejs') %>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        var el = document.querySelector('.progress-bar-inner');
        if (!el) return;

        var raw = el.getAttribute('data-progress') || '0';
        var pct = parseInt(raw, 10);

        if (!isNaN(pct) && pct >= 0) {
          if (pct > 100) pct = 100;
          setTimeout(function () {
            el.style.width = pct + '%';
          }, 100);
        }
      });
    </script>
</body>
</html>
