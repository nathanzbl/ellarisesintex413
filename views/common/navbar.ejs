<style>
/* --- (Your existing CSS here, keeping for completeness) --- */
:root {
--er-blue: #99B7C6;
--er-lavender: #978EC4;
--er-cream: #F9F5EA;
--er-blush: #FFD8D1;
--pink: #FFD7D1; 
--er-pink: #F9AFB1;
--er-sage: #9AB59D;
--er-charcoal: #3A3F3B;
--er-peach: #F4B092;
--er-rose: #CE325B;
}

nav {
width: 100%;
background-color: var(--pink);
box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
position: sticky;
top: 0;
z-index: 100;
font-family: "Montserrat", system-ui, sans-serif;
color: var(--er-charcoal);
}

.nav-container {
max-width: 1200px;
margin: 0 auto;
display: flex;
align-items: center;
justify-content: space-between;
padding: 0.75rem 1.5rem;
}

.nav-logo {
height: 50px;
width: auto;
}

.nav-links {
display: flex;
gap: 1rem;
margin-right: 1.5rem;
}

.nav-links a {
text-decoration: none;
color: var(--er-charcoal);
font-size: 0.9rem;
font-weight: 500;
letter-spacing: 0.04em;
padding: 0.5rem 0.75rem;
border-radius: 0.5rem;
transition: all 0.2s ease;
white-space: nowrap;
}

.nav-links a:hover {
background: var(--er-cream);
color: var(--er-rose);
}

/* --- Styles for Language Toggle --- */
.lang-toggle {
display: flex;
align-items: center;
gap: 0.5rem;
padding: 0.25rem;
background: var(--er-cream);
border-radius: 0.75rem;
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.lang-button {
background: none;
border: none;
cursor: pointer;
font-size: 1rem;
font-weight: 600;
padding: 0.5rem 0.6rem;
border-radius: 0.5rem;
transition: transform 0.1s, background-color 0.2s;
outline: none;
letter-spacing: 0.05em;
white-space: nowrap;
font-family: "Montserrat", system-ui, sans-serif;
}

.lang-button:hover {
transform: scale(1.05);
background-color: var(--er-blush);
}

/* Style for the currently active language */
.lang-button.active {
background-color: var(--er-rose);
color: var(--er-cream);
box-shadow: 0 0 0 2px var(--er-rose);
transform: scale(1.0);
}

.lang-button.active:hover {
background-color: var(--er-rose);
}

/* Responsive adjustments remain the same */
@media (max-width: 768px) {
.nav-container {
flex-wrap: wrap;
justify-content: center;
gap: 1rem;
}

.nav-links {
    justify-content: center; 
    flex-wrap: wrap;
    margin-right: 0;
    width: 100%;
}

.lang-toggle {
    position: absolute;
    top: 0.75rem;
    right: 1.5rem;
}
}
</style>

<nav>
    <div class="nav-container">
        <a href="/">
            <img src="/images/EllaRisesLogo.png.avif" alt="Ella Rises Logo" width="75px" onerror="this.onerror=null; this.src='https://www.google.com/search?q=https://placehold.co/75x50/F9AFB1/3A3F3B%3Ftext%3DLogo';">
        </a>

        <div class="nav-links">
            <a href="/" data-i18n-key="nav_home">Home</a>
            <a href="/donations" data-i18n-key="nav_donations">Donations</a>

            <% // Events link logic %>
            <% if (typeof currentUser !== "undefined" && currentUser) { %>
                <a href="/events" class="nav-link" data-i18n-key="nav_events">Events</a>
            <% } else { %>
                <a href="/eventspublic" class="nav-link" data-i18n-key="nav_events">Events</a>
            <% } %>

            <% if (typeof isLoggedIn !== 'undefined' && isLoggedIn) { %>
                <a href="/milestones" data-i18n-key="nav_milestones">Milestones</a>
                <a href="/participants" data-i18n-key="nav_participants">Participants</a>
                <a href="/surveys" data-i18n-key="nav_surveys">Surveys</a>
            <% } %>

            <% // Login / Logout logic %>
            <% if (typeof isLoggedIn !== 'undefined' && isLoggedIn) { %>
                <a href="/logout" style="color: var(--er-rose);" data-i18n-key="nav_login">Logout</a>
            <% } else { %>
                <a href="/login" data-i18n-key="nav_login">Login</a>
            <% } %>
        </div>

        <%
        // Default to 'en' if currentLanguage is not defined (requires server-side variable)
        // OR get the client-side preference if using client-side routing
        const lang = typeof currentLanguage !== 'undefined' ? currentLanguage : 'en';
        %>

        <div class="lang-toggle">
            <button class="lang-button <%= lang === 'en' ? 'active' : '' %>"
                    onclick="setLanguage('en')"
                    data-lang="en"
                    data-i18n-key="lang_en_label">
                <%= lang === 'en' ? 'ENG' : 'ING' %>
            </button>
            
            <button class="lang-button <%= lang === 'es' ? 'active' : '' %>"
                    onclick="setLanguage('es')"
                    data-lang="es"
                    data-i18n-key="lang_es_label">
                <%= lang === 'en' ? 'SPA' : 'ESP' %>
            </button>
        </div>
    </div>
</nav>